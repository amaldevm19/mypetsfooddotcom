<link rel="stylesheet" href="/stylesheets/users.css">

<div class="row text-center">
    <form class="form-signin" id="register_form" onsubmit="return validateInputs(event)" action="/users/register" method="POST">
        {{#each getMessages}}
            <div class="alert alert-danger " role="alert">
                {{#each this}}
                    {{this.err}}
                {{/each}}
            </div>
        {{/each}}
        <h1 class="h3 mb-3 font-weight-normal">Please register</h1>
        <label for="first_name" class="sr-only">First name</label>
        <input type="text" id="first_name" class="form-control mb-3 " placeholder="First name" required="" {{#unless firstName }}autofocus=""{{/unless}} name="firstName" value="{{firstName}}">
        
        <label for="last_name" class="sr-only">Last name</label>
        <input type="text" id="last_name" class="form-control mb-3" placeholder="Last name" required="" name="lastName" value="{{lastName}}" >
        
        <label for="email" class="sr-only">Email address</label>
        <input type="email" id="email" class="form-control mb-3 {{email_error_class}}" placeholder="Email address" {{#if email}}autofocus=""{{/if}}required="" name="email" value="{{email}}" >
  
        <label for="password" class="sr-only">Password</label>
        <input type="password" id="password" class="form-control mb-3" placeholder="Password" required="" name="password">

        <label for="confirm_password" class="sr-only">Confirm password</label>
        <input type="password" id="confirm_password" class="form-control mb-3" placeholder="Confirm password" required="" name="confirmPasword">

        <a class="btn btn-sm btn-success" href="login">Sign in</a>
        <button class="btn btn-lg btn-primary" type="submit" >Register</button>
        <p class="mt-5 mb-3 text-muted">Â© 2017-2020</p>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
    setTimeout(()=>{
        console.log("hello")
        document.querySelectorAll('.alert').item(0).classList.add("hide-alert")
    },2000)
    function validateInputs(e){
        let password = document.querySelector('#password').value;
        let confirm_password = document.querySelector('#confirm_password').value;
        
        if(password != confirm_password){
            document.querySelector('#confirm_password').classList.add("is-invalid");
            Swal.fire({
                title: 'Wrong password',
                text: 'Pleas provide matching password',
                icon: 'error',
                confirmButtonText: 'Okay'
            })
            return false;
        }else{
           return true
        }
        
    }
</script>